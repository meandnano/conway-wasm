<html>
<head>
		<title>Conway's Game of life in wasm</title>

		<style>
		body {
			width: 100%;
			height: 100%;
			background: white;
		}
		</style>

		<script type="text/javascript" src="/assets/wasm_exec.js"></script>
		<script type="text/javascript">
			const go = new Go(); // Defined in wasm_exec.js
			const WASM_URL = '/assets/game.wasm';

			var wasm;

			if ('instantiateStreaming' in WebAssembly) {
				WebAssembly.instantiateStreaming(fetch(WASM_URL), go.importObject).then(function (obj) {
					wasm = obj.instance;
					go.run(wasm);
				})
			} else {
				fetch(WASM_URL).then(resp =>
					resp.arrayBuffer()
				).then(bytes =>
					WebAssembly.instantiate(bytes, go.importObject).then(function (obj) {
						wasm = obj.instance;
						go.run(wasm);
					})
				)
			}
		</script>
</head>
<body>
</body>
</html>
